@model InvoiceVm
@{
    ViewData["Title"] = "InvoiceTest";
}

<h2>InvoiceText</h2>

<div class="infobody"></div>
<div class="row">
    <div class="col-lg-12">


        <header class="clearfix">
            <div class="container">
                @foreach (var i in @Model.CompInstVMs)
                {

                    //foreach (var i in p.OrdersVm)
                    //{
                    <figure>
                        <img class="logo" src="data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQxcHgiIGhlaWdodD0iNDFweCIgdmlld0JveD0iMCAwIDQxIDQxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy40LjEgKDE1NjgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5MT0dPPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9IklOVk9JQ0UtMiIgc2tldGNoOnR5cGU9Ik1TQXJ0Ym9hcmRHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwLjAwMDAwMCwgLTMwLjAwMDAwMCkiIGZpbGw9IiMyQThFQUMiPgogICAgICAgICAgICA8ZyBpZD0iWkFHTEFWTEpFIiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMC4wMDAwMDAsIDE1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxPR08iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNS4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzkuOTI0NjM2MywxOC40NDg2MjEgTDMzLjc3MDczNTgsMTEuODQyMjkyMyBMMzMuNzcwNzM1OCw0LjIxMDUyNjgxIEMzMy43NzA3MzU4LDIuODMwOTIyMzYgMzIuNzI5MzQxMSwxLjcxMjU0NDE0IDMxLjQ0MTczNzIsMS43MTI1NDQxNCBDMzAuMTU3NDExOSwxLjcxMjU0NDE0IDI5LjExNjAxNzMsMi44MzA5MjIzNiAyOS4xMTYwMTczLDQuMjEwNTI2ODEgTDI5LjExNjAxNzMsNi44NDUxMTcwNCBMMjQuNTMzNzM3NCwxLjkyNjAzNDcxIEMyMi4yNjgwNTg1LC0wLjUwNDQxNDA5NCAxOC4zMjkwMTcxLC0wLjUwMDEyNDQ4NCAxNi4wNjg4NzEsMS45MzAzMjQzMiBMMC42ODExNDgzMjksMTguNDQ4NjIxIEMtMC4yMjY5NDY5ODQsMTkuNDI1NjYyMSAtMC4yMjY5NDY5ODQsMjEuMDA2NzY4MiAwLjY4MTE0ODMyOSwyMS45ODIwNDk0IEMxLjU5MDE2NTc3LDIyLjk1OTA5MDUgMy4wNjU3ODIyMywyMi45NTkwOTA1IDMuOTczODc3NTUsMjEuOTgyMDQ5NCBMMTkuMzU5OTYwOSw1LjQ2Mzc1Mjc1IEMxOS44NjE0OTg0LDQuOTI4NDMxNDcgMjAuNzQ0Nzk4Niw0LjkyODQzMTQ3IDIxLjI0MzQ2NzIsNS40NjIxMDI5IEwzNi42MzE5MDcxLDIxLjk4MjA0OTQgQzM3LjA4ODU2NzUsMjIuNDcwNTE1IDM3LjY4MzM0MjgsMjIuNzEzNzAyOSAzOC4yNzgxMTgsMjIuNzEzNzAyOSBDMzguODc0MDIwNCwyMi43MTM3MDI5IDM5LjQ3MDAyNTIsMjIuNDcwNTE1IDM5LjkyNTA0NjIsMjEuOTgyMDQ5NCBDNDAuODMzNTUxMywyMS4wMDY3NjgyIDQwLjgzMzU1MTMsMTkuNDI1NjYyMSAzOS45MjQ2MzYzLDE4LjQ0ODYyMSBMMzkuOTI0NjM2MywxOC40NDg2MjEgWiIgaWQ9IkZpbGwtMSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMS4xMTEzOTc0LDEwLjIwNTg2MTIgQzIwLjY2NDM2ODIsOS43MjYzMDQ4MiAxOS45NDA2OTkzLDkuNzI2MzA0ODIgMTkuNDk0ODk5NiwxMC4yMDU4NjEyIEw1Ljk1OTg0Mjk2LDI0LjczMTM1OTIgQzUuNzQ2MTEzMiwyNC45NjAzNTg0IDUuNjI1MjExNDIsMjUuMjczNjA5OSA1LjYyNTIxMTQyLDI1LjYwMDA2MDIgTDUuNjI1MjExNDIsMzYuMTk0ODQ2IEM1LjYyNTIxMTQyLDM4LjY4MDcyOTcgNy41MDI3NzUwNyw0MC42OTYxODYzIDkuODE4NDUzOTgsNDAuNjk2MTg2MyBMMTYuNTE5NDg2Myw0MC42OTYxODYzIEwxNi41MTk0ODYzLDI5LjU1NTQxMDIgTDI0LjA4NTA2ODgsMjkuNTU1NDEwMiBMMjQuMDg1MDY4OCw0MC42OTYxODYzIEwzMC43ODY2MTM1LDQwLjY5NjE4NjMgQzMzLjEwMjI5MjQsNDAuNjk2MTg2MyAzNC45Nzk3NTM2LDM4LjY4MDcyOTcgMzQuOTc5NzUzNiwzNi4xOTQ4NDYgTDM0Ljk3OTc1MzYsMjUuNjAwMDYwMiBDMzQuOTc5NzUzNiwyNS4yNzM2MDk5IDM0Ljg1OTY3MTUsMjQuOTYwMzU4NCAzNC42NDUyMjQ1LDI0LjczMTM1OTIgTDIxLjExMTM5NzQsMTAuMjA1ODYxMiBaIiBpZD0iRmlsbC0zIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==" alt="">
                    </figure>
                    <div class="company-info">
                        <h2 class="title">@i.CompanyName</h2>
                        <span>  @i.Address @i.City, @i.Region,@i.Country</span>
                        <span class="line"></span>
                        <a class="phone" href="@i.Phone">@i.Phone</a>
                        <span class="line"></span>
                        <a class="email" href="@i.Email">@i.Email</a>
                    </div>
                    @*}*@
                }
            </div>
        </header>
       
        <section>
            <div class="details clearfix">
                @foreach (var i in @Model.CustomerInstVMs)
                {
                    <div class="client left">
                        <p>INVOICE TO:</p>
                        <p class="name">@i.FullName</p>
                        <p>
                            @i.Address @i.City,<br>
                            TX @i.PostCode, @i.Country
                        </p>
                        <a href="@i.Email">@i.Email</a>
                    </div>
                }


                <div class="data right">
                
                        <div class="title">Invoice </div>
                        <div class="date">
                       
                        </div>
                    
                </div>

            </div>
            <div class="container">
                <div class="table-wrapper">
                    <table>
                        <tbody class="head">
                            <tr>
                                <th class="no"></th>

                                <th class="desc">
                                    <div>Description</div>
                                </th>
                                <th class="odate">
                                    <div>Order Date</div>
                                </th>
                                <th class="rdate">
                                    <div>Required Date</div>
                                </th>
                                <th class="qty">
                                    <div>Quantity</div>
                                </th>
                                <th class="unit">
                                    <div>Unit price</div>
                                </th>
                                <th class="total">
                                    <div>Total</div>
                                </th>
                            </tr>
                        </tbody>


                        <tbody class="body">
                            @foreach (var i in @Model.OrdDetInstVMs)
                            {

                                <tr>
                                    <td class="no">@i.OrderId</td>
                                    
                                    <td class="desc">@i.Article</td>
                                    <td class="odate">@i.OrdersVm.OrderDate</td>
                                    <td class="rdate">@i.OrdersVm.RequiredDate</td>
                                    <td class="qty">@i.Quantity</td>
                                    <td class="unit">@i.Price</td>
                                    <td class="total">@i.Total</td>
                                </tr>

                                @*<tr>
                                        <td class="no">02</td>
                                        <td class="desc">Developing a Content Management System-based Website</td>
                                        <td class="qty">80</td>
                                        <td class="unit">$40.00</td>
                                        <td class="total">$3,200.00</td>
                                    </tr>
                                    <tr>
                                        <td class="no">03</td>
                                        <td class="desc">Optimize the site for search engines (SEO)</td>
                                        <td class="qty">20</td>
                                        <td class="unit">$40.00</td>
                                        <td class="total">$800.00</td>
                                    </tr>*@
                            }
                        </tbody>

                    </table>
                </div>
                <div class="no-break">
                    <table class="grand-total">


                        <tbody>
                            @foreach (var c in @Model.OrderInstVMs)
                            {
                                <tr>
                                    <td class="no"></td>
                                    <td class="desc"></td>
                                    <td class="qty"></td>
                                    <td class="unit">SUBTOTAL:</td>
                                    <td class="total">$@c.NetTotal</td>
                                </tr>
                                <tr>
                                    <td class="no"></td>
                                    <td class="desc"></td>
                                    <td class="qty"></td>
                                    <td class="unit">AX @c.AdvancePaymentTax:</td>
                                    <td class="total">@c.AdvancePaymentTaxAmount</td>
                                </tr>
                                    <tr>
                                        <td class="grand-total" colspan="5">
                                            <div>
                                                <span>GRAND TOTAL:</span>@c.TotalWithVat kr
                                            </div>
                                        </td>
                                    </tr>
                            }
                        </tbody>

                    </table>
                </div>
            </div>
        </section>

        <footer>
            <div class="container">
                <div class="thanks">Thank you!</div>
                <div class="notice">
                    <div>NOTICE:</div>
                    <div>A finance charge of 1.5% will be made on unpaid balances after 30 days.</div>
                </div>
                <div class="end">Invoice was created on a computer and is valid without the signature and seal.</div>
            </div>
        </footer>

    </div>
</div>
<div>
    <a asp-action="Index">Back to List</a>
</div>

<script type="text/javascript">

    $(document).ready(function() {

        var url = '@Url.Action("GetCustomerJson")';

        //$.getJSON(url,
        //    function (data) {

        //        loadDataCustomer(data);

        //    });

        $.ajax({
            url: url,
            type: 'Post',

            cache: false,
            dataType: 'json',
            async: true,
            contentType: "application/json",
            processData: false,

            success: function (data) {

                loadData(data);
            }, //End of AJAX Success function

            failure: function (data) {
                alert(data.responseText);
            }, //End of AJAX failure function
            error: function (data) {
                alert(data.responseText);
            } //End of AJAX error function

        });


    });
    function loadData(data) {

        console.log(data);
        //Here i will format & load/Show data
        var tab = $('<table class="table myTable"></table>');


        var ulList = $('<ul></ul>');
        ulList.append(
            '<li class=""><span> Billed To: </span></li>' +
            //'<li class="list-group-item">FullName: ' + '<span class="">' + data.customerId + '</span>'+ '</li>'+
            '<li class=""> ' + '<span class="">' + data.fullName + '</span>'+ '</li>'+
            //'<li class="list-group-item">ContactPerson: ' + data.contactPerson + '</li>' +
            //'<li class="list-group-item">ContactTitle: ' + data.contactTitle + '</li>' +
            '<li class=""> ' + data.address + '</li>' +
            '<li class=""> ' + data.city + '</li>' +
            '<li class=""> ' + data.postCode + '</li>' +
            '<li class=""> ' + data.region + '</li>' +
            '<li class=""> ' + data.country + '</li>' +
            '<li class=""> ' + data.phone + '</li>' +
            //'<li class="list-group-item">Phone2: ' + data.phone2 + '</li>' +
            //'<li class="list-group-item">Fax: ' + data.fax + '</li>' +
            '<li class=""> ' + data.email + '</li>' +
            //'<li class="list-group-item">Notes: ' + data.notes + '</li>' +
            '<li>'+

            '</li>'
        );



        $('li:odd', tab).css('background-color', 'lightgray');


        $('#UpdateCust').html(ulList);
        //document.getElementById("UpdateCust").innerHTML = tab;
    }

</script>